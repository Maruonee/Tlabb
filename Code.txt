#################################PytorchClass
#install
conda create -n TorchClass
conda activate TorchClass
conda install pytorch torchvision torchaudio cudatoolkit=11.3 -c pytorch
pip install matplotlib

#activate
conda activate TorchClass
cd /home/tlab/Tlab/pytorch/Classification

#train
python3 alexnet.py

#detect

##############################TensorEnv
#install
conda create -n TensorEnv python=3.8
conda activate TensorEnv
pip install --upgrade tensorflow
conda install -c anaconda cudnn==8.2.1
pip install opencv-python
pip install matplotlib
pip install SciPy
pip install knockknock

#activate
conda activate TensorEnv

python3 DenseNet201.py ; python3 InceptionResNetV2.py ; python3 InceptionV3.py ; python3 NASNetLarge.py ; python3 RegNetY320.py ; python3 ResNet50.py ; python3 ResNet50V2.py ; python3 ResNetRS50.py ; python3 VGG16.py ; python3 VGG19.py ; python3 Xception.py

python DenseNet201.py & python InceptionResNetV2.py & python InceptionV3.py & python NASNetLarge.py & python RegNetY320.py & python ResNet50.py & python ResNet50V2.py & python ResNetRS50.py & python VGG16.py & python VGG19.py & python Xception.py

##########################################voc2coco
#activate
conda activate ConVformat
cd /home/tlab/Tlab/voc2coco

python3 voc2coco.py --ann_dir /media/tlab/Data/Dataset/Mask/coco/VOC2007/Annotations --ann_ids /media/tlab/Data/Dataset/Mask/coco/VOC2007/ImageSets/Main/val.txt --labels /media/tlab/Data/Dataset/Mask/classes.txt --output /media/tlab/Data/Dataset/Mask/coco/VOC2007/output.json --ext xml

#########################################yolo2COCO
#install 
conda create -n ConVformat python=3.8
conda activate ConVformat
pip install numpy
pip install opencv-python
pip install tqdm
cd /home/tlab/Tlab/yolo2coco
git clone https://github.com/Taeyoung96/Yolo-to-COCO-format-converter.git

#activate
conda activate ConVformat
cd /home/tlab/Tlab/yolo2coco
pythoamain.py --path /media/tlab/Data/Dataset/Carm/train.txt --output train.json

##########################################SplitFolders
conda activate ConVformat
pip install split-folder


#########################################YOLOV3
#install 
conda create -n YOLOV3
conda activate YOLOV3
conda install pytorch==1.8.0 torchvision==0.9.0 torchaudio==0.8.0 cudatoolkit=11.1 -c pytorch -c conda-forge
pip install -r requirements.txt
pip install wandb

#activate
conda activate YOLOV3
cd /home/tlab/Tlabb/ObjectDetection/YOLOV3

#Pre train(optimizer hyperparameter)
python train.py --cfg /home/tlab/dataset/opt/yolov3.yaml --data /home/tlab/dataset/opt/coco128.yaml --weights '' --batch 32 --epochs 10 --cache --evolve --img 512

#Train 
python train.py --cfg /home/tlab/dataset/opt/yolov3.yaml --data /home/tlab/dataset/opt/coco128.yaml --weights '' --batch 32 --epochs 500 --hyp /home/tlab/dataset/opt/v3_hyp_evolved.yaml --img 512

#detect
python detect.py --weights '/home/tlab/dataset/test/weight/YOLOV3/best.pt' --source '/home/tlab/test/nonpass/*.tif' --save-conf --save-txt --conf-thres 0.45 --name 'bestnonpass_045' --save-crop

##########################################YOLOv4
#install 
conda create -n YOLOV4 python=3.8
conda activate YOLOV4
conda install pytorch torchvision torchaudio cudatoolkit=11.3 -c pytorch
pip install -r requirements.txt

#activate
conda activate YOLOV4
cd /home/tlab/Tlabb/ObjectDetection/YOLOV4

#Test
python test.py --img 640 --conf 0.001 --batch 8 --device 0 --data coco.yaml --cfg cfg/yolov4-pacsp.cfg --weights weights/yolov4-pacsp.pt  --img 512 512

#Train 
python train.py --device 0 --batch-size 16 --img 512 512 --data coco.yaml --cfg cfg/yolov4-pacsp.cfg --weights '' --name yolov4-pacsp

#detect
python detect.py --weights /home/tlab/Pretrain/YOLOV3/yolov3.pt --source /home/tlab/Tlab/pytorch/ObjectDetection/YOLOV3/data/images/bus.jpg

##########################################YOLOv5
#install 
conda create -n YOLOV5
conda activate YOLOV5
pip install wandb
pip install wandb --upgrade
conda install pytorch==1.8.0 torchvision==0.9.0 torchaudio==0.8.0 cudatoolkit=11.1 -c pytorch -c conda-forge
cd /home/tlab/Tlabb/ObjectDetection/YOLOV5
pip install -r requirements.txt

#activate
conda activate YOLOV5
cd /home/tlab/Tlabb/ObjectDetection/YOLOV5

#Pre train(optimizer hyperparameter)
python train.py --cfg /home/tlab/dataset/opt/yolov5x.yaml --data /home/tlab/dataset/opt/coco128.yaml --weights '' --batch 32 --epochs 10 --cache --evolve --img 512

#Train 
python train.py --cfg /home/tlab/dataset/opt/yolov5x.yaml --data /home/tlab/dataset/opt/coco128.yaml --weights '' --batch 32 --epochs 500 --hyp /home/tlab/dataset/opt/v5_hyp_evolved.yaml --img 512

#detect
python detect.py --weights '/home/tlab/dataset/test/weight/YOLOV5/best.pt' --source '/home/tlab/test/nonpass/*.tif' --save-conf --save-txt --conf-thres 0.4 --name 'bestnonpass_04' --save-crop

########################################YOLO_X
#install	
conda create -n YOLOX
conda activate YOLOX
conda install cudatoolkit=11.3

#activate 
conda activate YOLOX
cd /home/tlab/Tlabb/ObjectDetection/YOLOX

#train
python tools/train.py -f /media/tlab/Data/Dataset/Carm/yolox_s.py -d 1 -b 32 -c /home/tlab/Pretrain/YOLOX/yolox_s.pth

#detect
python tools/demo.py image -f exps/default/yolox_s.py -c /media/tlab/Data/Results/Carm/YOLOX/epoch_2000_ckpt.pth --path assets/dog.jpg --conf 0.25 --tsize 512 --save_result --device gpu

#test
python -m yolox.tools.eval -n yolox-s -c /home/tlab/Tlab/pytorch/ObjectDetection/YOLOX/YOLOX_outputs/4/yolox_voc_s/epoch_10_ckpt.pth -b 1 -d 1 --conf 0.001 --fp16 --fuse


########################################YOLOR
#install	
conda create -n YOLOR python=3.8
conda activate YOLOR
cd /home/tlab/Tlabb/ObjectDetection/YOLOR
conda install pytorch torchvision torchaudio cudatoolkit=11.3 -c pytorch
pip install -r requirements.txt

#activate 
conda activate YOLOR
cd /home/tlab/Tlabb/ObjectDetection/YOLOR

#train
python train.py --batch-size 4 --data /home/tlab/dataset/opt/coco.yaml --weights '' --device 0 --epochs 500 --cfg /home/tlab/dataset/opt/yolor_p6.cfg

#detect
python detect.py --source inference/images/horses.jpg --cfg cfg/yolor_p6.cfg --weights yolor_p6.pt --conf 0.25 --img-size 512 --device 0

#test
python test.py --data data/coco.yaml --img 1280 --batch 32 --conf 0.001 --iou 0.65 --device 0 --cfg cfg/yolor_p6.cfg --weights yolor_p6.pt --name yolor_p6_val

########################################YOLOV6
#install	
conda create -n YOLOV6 python=3.8
conda activate YOLOV6
cd /home/tlab/Tlabb/ObjectDetection/YOLOV6
conda activate YOLOV6
conda install pytorch torchvision torchaudio cudatoolkit=11.3 -c pytorch
pip install -r requirements.txt

#activate 
conda activate YOLOV6
cd /home/tlab/Tlabb/ObjectDetection/YOLOV6

#Pre train(optimizer hyperparameter)
python tools/train.py --batch 32 --conf configs/yolov6s.py --data /home/tlab/Tlabb/ObjectDetection/YOLOV6/data/data.yaml

custom_dataset
├── images
│   ├── train
│   │   ├── train0.jpg
│   │   └── train1.jpg
│   ├── val
│   │   ├── val0.jpg
│   │   └── val1.jpg
│   └── test
│       ├── test0.jpg
│       └── test1.jpg
└── labels
    ├── train
    │   ├── train0.txt
    │   └── train1.txt
    ├── val
    │   ├── val0.txt
    │   └── val1.txt
    └── test
        ├── test0.txt
        └── test1.txt
        
#train
python tools/train.py --batch 32 --conf configs/yolov6s.py --data /home/tlab/dataset/opt/coco.yaml

#Test
python tools/eval.py --data data/coco.yaml --batch 32 --weights yolov6s.pt --task val

#detect
python tools/infer.py --weights yolov6s.pt --source /home/tlab/Tlabb/ObjectDetection/YOLOV6/data/images

########################################YOLOV7
#install	
conda create -n YOLOV7 python=3.8
conda activate YOLOV7
cd /home/tlab/Tlabb/ObjectDetection/YOLOV7
conda install pytorch torchvision torchaudio cudatoolkit=11.3 -c pytorch
pip install -r requirements.txt

#activate 
conda activate YOLOV7
cd /home/tlab/Tlabb/ObjectDetection/YOLOV7

#Pre train(optimizer hyperparameter)
python train.py --workers 16 --img 512 512 --cfg /home/tlab/dataset/opt/yolov7.yaml --data /home/tlab/dataset/opt/coco.yaml --weights '' --batch-size 32 --epochs 10 --cache --evolve

#train
python train.py --workers 16 --img 512 512 --cfg /home/tlab/dataset/opt/yolov7.yaml --data /home/tlab/dataset/opt/coco.yaml --weights '' --batch-size 32 --epochs 500 --hyp /home/tlab/dataset/opt/hyp_evolved.yaml

#Test
python test.py --data data/coco.yaml --img 640 --batch 32 --conf 0.001 --iou 0.65 --weights yolov7.pt --name yolov7_640_val

#detect
python detect.py --weights yolov7.pt --source '/home/tlab/test/nonpass/*.tif' --save-conf --save-txt --conf-thres 0.4 --name 'lastnonpass_04'

#Pose detect
keypoint.ipynb

===================hand
conda create -n hand python=3.8.8
conda activate hand
pip install mediapipe opencv-python

conda activate hand
cd C:\Users\tiger1005\Documents\Pose
Jupyter Notebook

===================allpose
conda create -n allpose python=3.8.8
conda activate allpose
pip install tensorflow==2.4.1 tensorflow-gpu==2.4.1 opencv-python matplotlib

conda activate allpose
cd C:\Users\tiger1005\Documents\Pose
Jupyter Notebook


=========================================================
이름바꾸기
1. 확인
rename -n 's/.jpg/.tif/' *.jpg
rename -n 's/.tif/.jpg/' *.tif
2. 실행
rename -f 's/.jpg/.tif/' *.jpg
rename -f 's/.tif/.jpg/' *.tif


